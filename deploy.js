require('dotenv').config();
const { ethers } = require('ethers');

async function main() {
    //console.log(ethers);
    //console.log(process.env.ALCHEMY_API_URL);
    const provider = new ethers.providers.JsonRpcProvider(process.env.ALCHEMY_API_URL);
    const wallet = new ethers.Wallet(process.env.PRIVATE_KEY, provider);
    const abi = [ // ABI generated by Hardhat
        "function set(uint256)",
        "function get() view returns (uint256)"
    ];

    const bytecode = '0x608060405234801561001057600080fd5b506040516102353803806102358339818101604052810190610032919061007a565b80600081905550506100a7565b600080fd5b6000819050919050565b61005781610044565b811461006257600080fd5b50565b6000815190506100748161004e565b92915050565b6000602082840312156100905761008f61003f565b5b600061009e84828501610065565b91505092915050565b61017f806100b66000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80632a1afcd91461004657806360fe47b1146100645780636d4ce63c14610080575b600080fd5b61004e61009e565b60405161005b91906100d0565b60405180910390f35b61007e6004803603810190610079919061011c565b6100a4565b005b6100886100ae565b60405161009591906100d0565b60405180910390f35b60005481565b8060008190555050565b60008054905090565b6000819050919050565b6100ca816100b7565b82525050565b60006020820190506100e560008301846100c1565b92915050565b600080fd5b6100f9816100b7565b811461010457600080fd5b50565b600081359050610116816100f0565b92915050565b600060208284031215610132576101316100eb565b5b600061014084828501610107565b9150509291505056fea26469706673582212203bd2499889d24f0561d4cbd026285da2822eb37eec61d5eb669e691237770e9264736f6c63430008180033'; // Replace with actual bytecode

    const contractFactory = new ethers.ContractFactory(abi, bytecode, wallet);
    const contract = await contractFactory.deploy(42); // Deploy with initial value 42

    await contract.deployTransaction.wait();
    console.log(`Contract deployed to: ${contract.address}`);
}

main().catch((error) => {
    console.error(error);
    process.exitCode = 1;
});
